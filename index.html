<html>
  <head>
    <title>Test Site</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <meta property="og:image" content="img/PRW.jpeg" />
    <meta property="og:title" content="A Punk Rock Wedding" />
    <meta property="og:description" content="Tune in to the Punk Rock Wedding of the year and follow the Tour Dates!" /> -->

    <link rel="stylesheet" href="index.css">
    <!-- <link rel="stylesheet" href="animate.css"> -->
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">

    <script src="https://use.fontawesome.com/5ec038df72.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <script>

      // var instagramUrl = "https://api.instagram.com/oembed?url=http://instagr.am/p/fA9uwTtkSN/"
      var instaHashtag = "gopro"
      var arrPhotoURL = [];

      function getPhotoIDs(htmlSource) {
        arrPhotoURL = htmlSource.split(/"shortcode":"/)
        //the first element is garbage
        arrPhotoURL.shift();
        for (i=0; i < arrPhotoURL.length; i++) {
          arrPhotoURL[i] = arrPhotoURL[i].slice(0,11);
        }
        console.log(arrPhotoURL);
      }

      function getPicture(instagramUrl) {
        $.getJSON(instagramUrl, function(json){
          console.log(json);
          $("#instagram-placeholder").html(json.html);
        });
      }

      $(document).ready(function(){

        //getting the html of a page. allorigins.me is a CORS workaround
        var instagramUrl = "https://www.instagram.com/explore/tags/" + instaHashtag + "/"
        $.getJSON('https://allorigins.me/get?url=' + encodeURIComponent(instagramUrl) + '&callback=?', function(instagramSource) {
          getPhotoIDs(instagramSource.contents);
          //the following will be iterated through all photos found while scraping
          // var photoURL = "https://api.instagram.com/oembed?url=https://www.instagram.com/p/BjhDMciHuKW/"
          var photoURL = "https://api.instagram.com/oembed?url=https://www.instagram.com/p/" + arrPhotoURL[0];
          getPicture(photoURL);
        });



      });

    </script>


    <style>
    </style>
  </head>

  <body>
    <div class="container">

      <div id="instagram-placeholder">

      </div>
      <div></div>
      <div></div>
      <div>

      </div>



      <div class="full-width"><img src="img/band.png"></div>

      <div class="footer">
        <p>Made by Marco Vidonis, 2018</p>
      </div>
    </div>

    <!-- <script async defer src="http://www.instagram.com/embed.js"></script> -->

  </body>


</html>
