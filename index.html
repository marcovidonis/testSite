<html>
  <head>
    <title>Test Site</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <meta property="og:image" content="img/PRW.jpeg" />
    <meta property="og:title" content="A Punk Rock Wedding" />
    <meta property="og:description" content="Tune in to the Punk Rock Wedding of the year and follow the Tour Dates!" /> -->

    <link rel="stylesheet" href="index.css">
    <!-- <link rel="stylesheet" href="animate.css"> -->
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <script>

      // var instagramUrl = "https://api.instagram.com/oembed?url=http://instagr.am/p/fA9uwTtkSN/"
      var instaHashtag = "gopro"
      var arrPhotoURL = [];
      var instagramHTMLs = [];

      function getPhotoIDs(htmlSource) {
        arrPhotoURL = htmlSource.split(/"shortcode":"/)
        //the first element is garbage
        arrPhotoURL.shift();
        for (i=0; i < arrPhotoURL.length; i++) {
          arrPhotoURL[i] = arrPhotoURL[i].slice(0,11);
        }
        console.log(arrPhotoURL);
      }

      function getPicture(sourceUrl) {
        $.getJSON(sourceUrl, function(json){
          console.log(json);
          // $("#instagram-placeholder").html(json.html);
          return json.html;
        });
      }

      $(document).ready(function(){

        //getting the html of a page. allorigins.me is a CORS workaround
        var instagramUrl = "https://www.instagram.com/explore/tags/" + instaHashtag + "/";
        var photoURL;

        $.getJSON('https://allorigins.me/get?url=' + encodeURIComponent(instagramUrl) + '&callback=?', function(instagramSource) {
          getPhotoIDs(instagramSource.contents);
        })
          .done(function() {
            for (i=0; i<3; i++) {
              photoURL = "https://api.instagram.com/oembed?url=https://www.instagram.com/p/" + arrPhotoURL[i];
              // instagramHTMLs.push(getPicture(photoURL));
              console.log("pushed HTML to array, no. " + i);
              // $("#instagram-placeholder").add("div").html(instagramHTMLs[i]);

              $.getJSON(photoURL)
                .done(function(data) {
                  $("<div/>", {
                    html: data.html
                  }).appendTo("#instagram-placeholder");
                });
            }
          });
      });

      $(window).on("load", function() {
        $("#coverScreen").hide();
      });
    </script>


    <style>
    </style>
  </head>

  <body>
    <div id="coverScreen"><i class = "fas fa-spinner"></i></div>

    <div class="container">

      <div id="instagram-placeholder"></div>

      <!-- <div class="full-width"><img src="img/band.png"></div> -->

      <footer class="footer">
        <img src="img/band.png">
        <!-- <p>Made by Marco Vidonis, 2018</p> -->
      </footer>
    </div>

  </body>


</html>
